<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Calendar</title>
    <!-- Tailwind CSS (for utility classes) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Link to your new external stylesheet -->
    <link rel="stylesheet" href="style.css">
    
</head>
<body class="bg-gray-900">

    <div class="glass-container">
        <!-- Sidebar (Desktop) -->
        <aside class="sidebar hidden md:flex">
            <div class="flex flex-col h-full">
                <button id="open-event-modal-btn" class="btn-create">
                    <i data-lucide="plus"></i>
                    <span>Create Agenda</span>
                </button>

                <div class="mt-6">
                    <!-- Mini Calendar Header -->
                    <div class="flex items-center justify-between mb-2">
                        <h2 id="mini-cal-header" class="font-semibold text-lg text-white">March 2025</h2>
                        <div class="flex items-center gap-1">
                            <button id="mini-cal-prev" class="p-1 rounded-full hover:bg-white/10 text-white/80">
                                <i data-lucide="chevron-left" class="w-5 h-5"></i>
                            </button>
                            <button id="mini-cal-next" class="p-1 rounded-full hover:bg-white/10 text-white/80">
                                <i data-lucide="chevron-right" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                    <!-- Mini Calendar Grid -->
                    <div id="mini-calendar-grid" class="mini-calendar">
                        <!-- Days will be populated by JS -->
                    </div>
                </div>

                <!-- My Calendars (Tags) -->
                <div class="mt-8 flex-grow overflow-y-auto pr-2">
                    <div class="flex items-center justify-between mb-2">
                        <h2 class="font-semibold text-lg text-white">My Calendars</h2>
                        <button id="open-calendar-modal-btn" class="p-1 rounded-full hover:bg-white/10 text-white/80">
                            <i data-lucide="plus" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <ul id="calendar-list" class="space-y-2">
                        <!-- Calendar tags populated by JS -->
                        <li class="flex items-center gap-2">
                            <span class="w-3 h-3 rounded-full bg-blue-500"></span>
                            <span class="text-white/90">Loading...</span>
                        </li>
                    </ul>
                </div>

                <div class="text-xs text-white/50 mt-4">
                    Logged in as: <span id="user-id-display" class="font-mono">...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Main Header -->
            <header class="main-header">
                <div class="flex items-center gap-4">
                    <button id="mobile-menu-btn" class="p-2 rounded-full hover:bg-white/10 text-white/80 md:hidden">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                    <button id="today-btn" class="hidden md:block px-4 py-2 rounded-lg text-sm font-medium bg-white/10 hover:bg-white/20 transition">Today</button>
                    <div class="flex items-center gap-2">
                        <button id="prev-week-btn" class="p-2 rounded-full hover:bg-white/10 text-white/80">
                            <i data-lucide="chevron-left" class="w-5 h-5"></i>
                        </button>
                        <button id="next-week-btn" class="p-2 rounded-full hover:bg-white/10 text-white/80">
                            <i data-lucide="chevron-right" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <h1 id="main-header-date" class="text-2xl font-semibold text-white">March 2 - 8, 2025</h1>
                </div>

                <div class="flex items-center gap-4">
                    <div id="view-switcher" class="hidden md:flex items-center bg-white/5 rounded-lg">
                        <button id="view-day-btn" class="px-4 py-2 rounded-lg text-sm font-medium text-white/70 hover:bg-white/10 hover:text-white">Day</button>
                        <button id="view-week-btn" class="px-4 py-2 rounded-lg text-sm font-medium bg-white/20 text-white">Week</button>
                        <button id="view-month-btn" class="px-4 py-2 rounded-lg text-sm font-medium text-white/70 hover:bg-white/10 hover:text-white">Month</button>
                    </div>

                    <button id="open-profile-modal-btn" class="header-icon-btn hidden md:block">
                        <i data-lucide="user" class="w-5 h-5"></i>
                    </button>
                </div>
            </header>

            <!-- Calendar Grid -->
            <div class="calendar-grid-container">
                <div id="main-calendar-grid">
                    <!-- Headers and cells will be populated by JS -->
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav md:hidden">
        <button id="mobile-home-btn" class="mobile-nav-btn active">
            <i data-lucide="calendar-days" class="w-6 h-6"></i>
        </button>
        <button id="mobile-sidebar-btn" class="mobile-nav-btn">
            <i data-lucide="layout-sidebar" class="w-6 h-6"></i>
        </button>
        <button id="mobile-create-btn" class="mobile-create-btn">
            <i data-lucide="plus" class="w-7 h-7"></i>
        </button>
        <button id="mobile-profile-btn" class="mobile-nav-btn">
            <i data-lucide="user" class="w-6 h-6"></i>
        </button>
    </nav>

    <!-- Create/Edit Event Modal -->
    <div id="event-modal" class="modal-backdrop">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 id="event-modal-title" class="text-2xl font-semibold">Create Agenda</h2>
                <button class="modal-close p-2 rounded-full hover:bg-white/10">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <form id="event-form">
                <input type="hidden" id="event-id" name="eventId">
                <div class="mb-4">
                    <label for="event-title" class="form-label">Title</label>
                    <input type="text" id="event-title" name="title" class="form-input" placeholder="e.g., Team Meeting" required>
                </div>
                <div class="mb-4">
                    <label for="event-calendar" class="form-label">Calendar / Tag</label>
                    <select id="event-calendar" name="calendar" class="form-select" required>
                        <option value="">Select a tag...</option>
                        <!-- Options populated by JS -->
                    </select>
                </div>
                <div class="mb-4">
                    <label for="event-date" class="form-label">Date</label>
                    <input type="date" id="event-date" name="date" class="form-input" required>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div>
                        <label for="event-start-time" class="form-label">Start Time</label>
                        <input type="time" id="event-start-time" name="startTime" class="form-input" required step="900">
                    </div>
                    <div>
                        <label for="event-end-time" class="form-label">End Time</label>
                        <input type="time" id="event-end-time" name="endTime" class="form-input" required step="900">
                    </div>
                </div>
                <div class="flex flex-col gap-3">
                    <button type="submit" id="save-event-btn" class="btn-primary">
                        <span>Save Agenda</span>
                    </button>
                    <button type="button" id="delete-event-btn" class="btn-danger hidden">
                        Delete Event
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add New Calendar (Tag) Modal -->
    <div id="calendar-modal" class="modal-backdrop">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold">Add New Calendar</h2>
                <button class="modal-close p-2 rounded-full hover:bg-white/10">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <form id="calendar-form">
                <div class="mb-4">
                    <label for="calendar-name" class="form-label">Calendar Name</label>
                    <input type="text" id="calendar-name" name="name" class="form-input" placeholder="e.g., Work, Personal" required>
                </div>
                <div class="mb-6">
                    <label for="calendar-color" class="form-label">Color</label>
                    <input type="color" id="calendar-color" name="color" class="form-input w-full h-12" value="#3b82f6" required>
                </div>
                <button type="submit" id="save-calendar-btn" class="btn-primary">Save Calendar</button>
            </form>
        </div>
    </div>

    <!-- Profile & Settings Modal -->
    <div id="profile-modal" class="modal-backdrop">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold">Profile & Settings</h2>
                <button class="modal-close p-2 rounded-full hover:bg-white/10">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <form id="profile-form">
                <div class="mb-4">
                    <label for="display-name" class="form-label">Display Name</label>
                    <input type="text" id="display-name" name="name" class="form-input" placeholder="Your Name">
                </div>
                <div class="mb-6">
                    <label for="background-url" class="form-label">Background Image URL</label>
                    <input type="url" id="background-url" name="backgroundUrl" class="form-input" placeholder="https://images.unsplash.com/...">
                    <p class="text-xs text-white/60 mt-2">Find beautiful images on <a href="https://unsplash.com" target="_blank" class="underline hover:text-white">Unsplash</a>.</p>
                </div>
                <button type="submit" id="save-profile-btn" class="btn-primary">Save Settings</button>
            </form>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container"></div>

    <!-- Firebase and App Logic -->
    <!-- Note: Firebase SDKs are imported inside app.js -->
    <script type="module" src="app.js"></script>

</body>
</html>

